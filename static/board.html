<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" src="script/fetchJSON.js"></script>
        <script type="text/javascript" src="script/board.js"></script>
    </head>
    <body>
        <main>
            <h1>掲示板</h1>
            <div id=container></div>
            
            <div class=writebox>
                名前：<input type=text id=inp_name><br>コメント<br>
                <textarea id=inp_body></textarea><br>
                <button onclick="add_board(0)">書き込む</button>
            </div>
        </main>

        <script type=module>
        //import { fetchJSON } from "https://js.sabae.cc/fetchJSON.js";
        const enc = (s) => {
            s = s.replace(/&/g, "&amp;");
            s = s.replace(/</g, "&lt;");
            s = s.replace(/>/g, "&gt;");
            s = s.replace(/\n/g, "<br>");
            s = s.replace(/"/g, "&quot");
            s = s.replace(/'/g, "&#39");
            return s;
        };

        window.onload = async () => {
            const num=0;
            const api_url="api/list?"+num.toString();
            console.log(api_url);
            const data=await fetchJSON(api_url);
            for (const d of data) {
                const div = document.createElement("div");
                div.className = "bbsitem";
                div.innerHTML = `<span class=date>${enc(d.date)}</span> by <span class=name>${enc(d.name)}</span><div class=body>${enc(d.body)}</div>`
                container.appendChild(div);
            }
        };
        

        </script>

        <a href="SeaSpot.html">戻る</a>
    </body>
</html>